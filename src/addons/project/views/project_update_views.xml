<?xml version="1.0" encoding="utf-8"?>
<verp>
    <record id="projectUpdateViewSearch" model="ir.ui.view">
        <field name="label">project.update.view.search</field>
        <field name="model">project.update</field>
        <field name="arch" type="xml">
            <search string="Search Update">
                <field name="label"/>
                <field name="projectId" invisible="1"/>
            </search>
        </field>
    </record>

    <record id="projectUpdateViewForm" model="ir.ui.view">
        <field name="label">project.update.view.form</field>
        <field name="model">project.update</field>
        <field name="arch" type="xml">
            <form string="Project Update" class="o-form-project-update">
                <sheet>
                    <div class="oe-title">
                        <h1>
                            <field name="label" class="o-text-overflow" placeholder="Title of the Update"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="projectId" invisible="1"/>
                            <field name="color" invisible="1"/>
                            <field name="status" widget="statusWithColor" options="{'colorField': 'color'}"/>
                            <field name="progress" widget="progressbar" options="{'currentValue': 'progress', 'maxValue': '100', 'editable': true}"/>
                        </group>
                        <group>
                            <field name="userId" widget="many2oneAvatarUser" readonly="1"/>
                            <field name="date"/>
                        </group>
                    </group>
                    <separator/>
                    <notebook>
                        <page string="Description" name="description">
                            <field name="description" widget="htmlWithAction" nolabel="1" class="o-project-update-description"/>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe-chatter">
                    <field name="messageFollowerIds" options="{'postRefresh':true}" groups="base.groupUser"/>
                    <field name="activityIds"/>
                    <field name="messageIds"/>
                </div>
            </form>
        </field>
    </record>

    <record id="projectUpdateViewKanban" model="ir.ui.view">
        <field name="label">project.update.view.kanban</field>
        <field name="model">project.update</field>
        <field name="arch" type="xml">
            <kanban class="o-pupdate-kanban" sample="1" jsClass="projectUpdateKanban">
                <field name="color"/>
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="{{!selectionMode ? 'oe-kanban-color-' + record.color.rawValue : ''}} oe-kanban-global-click o-pupdate-kanban-card">
                            <!-- Project Update Kanban View is always ungrouped - see jsClass -->
                            <div class="o-kanban-detail-ungrouped row">
                                <div class="col-lg-4 o-pupdate-name">
                                    <b><field name="nameCropped"/></b>
                                    <div>
                                        <field name="userId" widget="many2oneAvatarUser"/>
                                        <t t-esc="record.userId.value"/>
                                    </div>
                                </div>
                                <div class="col-lg-2">
                                    <field name="color" invisible="1"/>
                                    <b><field name="status" widget="statusWithColor" options="{'colorField': 'color'}"/></b>
                                </div>
                                <div class="col-lg-2">
                                    <b><field name="progressPercentage" widget="percentage"/></b>
                                    <div>Progress</div>
                                </div>
                                <div class="col-lg-2">
                                    <b><field name="date"/></b>
                                    <div>Date</div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record id="projectUpdateViewTree" model="ir.ui.view">
        <field name="label">project.update.view.tree</field>
        <field name="model">project.update</field>
        <field name="arch" type="xml">
            <tree sample="1" jsClass="projectUpdateList">
                <field name="label"/>
                <field name="userId" widget="many2oneAvatarUser" optional="show"/>
                <field name="progressPercentage" string="Progress" widget="percentage" optional="show"/>
                <field name="date" optional="show"/>
                <field name="color" invisible="1"/>
                <field name="status" widget="statusWithColor" options="{'colorField': 'color'}"/>
            </tree>
        </field>
    </record>

    <record id="projectUpdateAllAction" model="ir.actions.actwindow">
        <field name="label">Project Updates</field>
        <field name="type">ir.actions.actwindow</field>
        <field name="resModel">project.update</field>
        <field name="viewMode">kanban,tree,form</field>
        <field name="domain">[['projectId', '=', activeId]]</field>
        <field name="searchViewId" ref="projectUpdateViewSearch"/>
        <field name="help" type="html">
            <p class="o-view-nocontent-smiling-face">
            No updates found. Let's create one!
            </p><p>
            Get a snapshot of the status of your project and share its progress with key stakeholders.
            </p>
        </field>
    </record>

    <record id="projectMilestoneViewForm" model="ir.ui.view">
        <field name="label">project.milestone.view.form</field>
        <field name="model">project.milestone</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group>
                            <field name="projectId" invisible="1"/>
                            <field name="label" placeholder="E.g: Product Launch"/>
                            <field name="deadline"/>
                            <field name="isReached"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="projectMilestoneViewTree" model="ir.ui.view">
        <field name="label">project.milestone.view.tree</field>
        <field name="model">project.milestone</field>
        <field name="arch" type="xml">
            <tree decoration-danger="isDeadlineExceeded" decoration-muted="isReached" editable="bottom">
                <field name="label"/>
                <field name="deadline" optional="show"/>
                <field name="isReached" optional="show"/>
                <field name="isDeadlineExceeded" invisible="1"/>
            </tree>
        </field>
    </record>

    <record id="projectMilestoneAll" model="ir.actions.actwindow">
        <field name="label">Milestones</field>
        <field name="resModel">project.milestone</field>
        <field name="viewMode">tree,form</field>
        <field name="context">{'default_projectId': activeId}</field>
        <field name="domain">[['projectId', '=', activeId]]</field>
        <field name="help" type="html">
            <p class="o-view-nocontent-smiling-face">
            No milestones found. Let's create one!
            </p><p>
            Track major progress points that must be reached to achieve success.
            </p>
        </field>
    </record>
</verp>
