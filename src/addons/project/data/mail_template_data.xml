<?xml version="1.0" encoding="utf-8"?>
<verp>
    <data noupdate="1">
        <!-- Sample stage-related template -->
        <record id="mailTemplateDataProjectTask" model="mail.template">
            <field name="label">Task: Reception Acknowledgment</field>
            <field name="modelId" ref="project.model_projectTask"/>
            <field name="subject">Reception of {{ object.label }}</field>
            <field name="useDefaultTo" eval="true"/>
            <field name="bodyHtml" type="html">
<div>
    Dear <t t-out="await (await object.partnerId).label || 'customer'">Brandon Freeman</t>,<br/>
    Thank you for your enquiry.<br />
    If you have any questions, please let us know.
    <br/><br/>
    Thank you,
    <t t-if="user.signature">
        <br />
        <t t-out="await user.signature || ''">--<br/>Mitchell Admin</t>
    </t>
</div>
        </field>
            <field name="lang">{{ await (await object.partnerId).lang }}</field>
            <field name="autoDelete" eval="true"/>
        </record>

        <!-- Mail sent to request a rating for a task -->
        <record id="ratingProjectRequestEmailTemplate" model="mail.template">
            <field name="label">Task: Rating Request</field>
            <field name="modelId" ref="project.model_projectTask"/>
            <field name="subject">{{ await (await (object.projectId).companyId).label }}: Satisfaction Survey</field>
            <field name="emailFrom">{{ bool(await object.ratingGetRatedPartnerId()) ? (await (await object.ratingGetRatedPartnerId()).emailFormatted : await user.emailFormatted) }}</field>
            <field name="partnerTo" >{{ (await object.ratingGetPartnerId()).id }}</field>
            <field name="bodyHtml" type="html">
<div>
    <t t-set="accessToken" t-value="await object.ratingGetAccessToken()"/>
    <t t-set="partner" t-value="await object.ratingGetPartnerId()"/>
    <table border="0" cellpadding="0" cellspacing="0" width="590" style="width:100%; margin:0px auto;">
    <tbody>
        <tr><td valign="top" style="font-size: 13px;">
            <t t-if="await partner.label">
                Hello <t t-out="await partner.label || ''">Brandon Freeman</t>,<br/><br/>
            </t>
            <t t-else="">
                Hello,<br/><br/>
            </t>
            Please take a moment to rate our services related to the task "<strong t-out="await object.label || ''">Planning and budget</strong>"
            <t t-if="await (await object.ratingGetRatedPartnerId()).label">
                assigned to <strong t-out="await (await object.ratingGetRatedPartnerId()).label || ''">Mitchell Admin</strong>.<br/>
            </t>
            <t t-else="">
                .<br/>
            </t>
        </td></tr>
        <tr><td style="text-align: center;">
            <table border="0" cellpadding="0" cellspacing="0" width="590" summary="o-mail-notification" style="width:100%; margin: 32px 0px 32px 0px;">
                <tr><td style="font-size: 13px;">
                    <strong>Tell us how you feel about our service</strong><br/>
                    <span style="text-color: #888888">(click on one of these smileys)</span>
                </td></tr>
                <tr><td style="font-size: 13px;">
                    <table style="width:100%;text-align:center;margin-top:2rem;">
                        <tr>
                            <td>
                                <a t-attf-href="/rate/{{ accessToken }}/5">
                                    <img alt="Satisfied" src="/rating/static/src/img/rating_5.png" title="Satisfied"/>
                                </a>
                            </td>
                            <td>
                                <a t-attf-href="/rate/{{ accessToken }}/3">
                                    <img alt="Okay" src="/rating/static/src/img/rating_3.png" title="Okay"/>
                                </a>
                            </td>
                            <td>
                                <a t-attf-href="/rate/{{ accessToken }}/1">
                                    <img alt="Dissatisfied" src="/rating/static/src/img/rating_1.png" title="Dissatisfied"/>
                                </a>
                            </td>
                        </tr>
                    </table>
                </td></tr>
            </table>
        </td></tr>
        <tr><td valign="top" style="font-size: 13px;">
            We appreciate your feedback. It helps us to improve continuously.
            <t t-if="await (await object.projectId).ratingStatus == 'stage'">
                <br/><span style="margin: 0px 0px 0px 0px; font-size: 12px; opacity: 0.5; color: #454748;">This customer survey has been sent because your task has been moved to the stage <b t-out="await (await object.stageId).label || ''">In progress</b></span>
            </t>
            <t t-if="await (await object.projectId).ratingStatus == 'periodic'">
                <br/><span style="margin: 0px 0px 0px 0px; font-size: 12px; opacity: 0.5; color: #454748;">This customer survey is sent <b t-out="await (await object.projectId).ratingStatusPeriod || ''">Weekly</b> as long as the task is in the <b t-out="await (await object.stageId).label || ''">In progress</b> stage.</span>
            </t>
        </td></tr>
    </tbody>
    </table>
</div>
            </field>
            <field name="lang">{{ await (await object.ratingGetPartnerId()).lang }}</field>
            <field name="autoDelete" eval="true"/>
        </record>

        <!-- You have been assigned email -->
        <template id="projectMessageUserAssigned">
<p style="margin: 0px;">
    <span>Dear <t t-esc="assigneeName"/>,</span><br />
    <span style="margin-top: 8px;">You have been assigned to the <t t-esc="modelDescription || 'document'"/> <t t-esc="await object.displayName"/>.</span>
</p>
<p style="padding-top: 24px; padding-bottom: 16px;">
    <a t-att-href="accessLink" t-att-data-oe-model="object._name" t-att-data-oe-id="object.id" style="background-color:#875A7B; padding: 10px; text-decoration: none; color: #fff; border-radius: 5px;">
            View <t t-esc="modelDescription || 'document'"/>
    </a>
</p>
        </template>
    </data>
</verp>
